---
title: "Field performance of the GaugeCam image-based water level measurement system"
author: Fran√ßois Birgand, Ken Chapman, Arnab Hazra, Troy Gilmore, Andrew Brown, Ana-Maria Staicu
date: '`r format(Sys.time(), "%d %B, %Y")`'
documentclass: article
output: 
  bookdown::html_document2:
    toc: false
    number_sections: false
    keep_md: true
  bookdown::pdf_document2:
    toc: true
    number_sections: true
  bookdown::word_document2:
    reference_docx: template.docx
    fig_width: 4
    fig_height: 3
    fig_caption: true
bibliography: [articleGC-NR.bibtex]
biblio-style: apalike
pandoc_args: [ "--csl", "hydrological-processes.csl" ]
link-citations: yes
---

```{r setup, include=FALSE, echo=FALSE}  
# this chunck sets up some of the common setting for all the document later on.
# The first line below sets the figure default sizes, figures will be aligned, that the R code does not appear (echo=FALSE), and that the 
# warning messages should not show up

knitr::opts_chunk$set(fig.height=5, fig.width=9, fig.align="center", echo = FALSE, warning=FALSE)

# I found this function that loads a list of packages using 'library', and installs them if they are not installed. 
ipak <- function(pkg){
    new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
    if (length(new.pkg)) 
        install.packages(new.pkg, dependencies = TRUE)
    sapply(pkg, library, character.only = TRUE)
}

# usage
packages <- c("knitr", "captioner", "stringr", "devtools", "bookdown","kableExtra")
ipak(packages)
```

```{r echo=FALSE, include=FALSE}
rmarkdown::default_output_format(knitr::current_input())$name
```

# Abstract

# Introduction

- Much of what we know in hydrology today takes root at one point in the ability to observe and record on a near continuous basis the rapid changes in water stages in rivers, lakes, and estuaries
- To this day, most of flow rates calculated in the thousands of hydrologic stations around the world are still calculated from the water level or stage measurements.
- Since the first hydrologic station installed on the Mississippi river in the 1880s, there have been many devices installed to record water stages
    - The mechanisms to measure stages used until now include fully mechanical pulley and float based systems, pressure transducers immerserd in water, pressure transducers in air in equilibrium with the water column or bubblers, radar systems, ultrasonic systems placed above or under the water. 
- In all measuruments there is an intermediate operation between the raw signal and the stage values recorded. In other words the raw signals always require interpretation before a number is assigned to a measurement.  All measurements are essentially indirect. For example, the mechanical vertical movements of a float are transfered to a pulley, and the rotation of the pulley is recorded as a voltage at the potentiometer electrodes, or as a pen trace on paper. Same thing with pressure transducers, etc.
- In all past and current systems, the interpretation of the raw signal is done in the field
- Because of wear with time and of the variable temperature and moisture conditions where the instruments are installed, the relationship between the water level and the raw signal may drift over time (e.g. float weigh changes because of biofilm growth on it; membrane of a pressure transducer diforms over time), and/or the interpretation system of the raw signal also drifts (e.g., potentiometer).
- In all cases, regular calibrations are required to maintain the quality of stage measurements. But because the interpretation of the raw data is done in the field, the calibration must also be done in the field, which means that qualified personel must go to the field at regular intervals (monthly or more often).
- Additionally, none of the existing system provide means to independently verify data
- The GaugeCam image based systems provides solutions to the drawbacks of existing systems: the interpretation of the raw data is performed remotely, on a server, and the raw data itseld can be reinterpreted at any times and can be visually verified. 
- The obvious advantages are that maintainance does not require highly qualified personnel, and the timing for maintainance can be detected by the user (e.g., seen in the raw data itself, i.e., in the image), and every single measurement is visually verifiable. 
- This means that the system can be installed virtually anywhere in the world where a cell phone connection is possible for live measurements
- The GaugeCam system uses images streaming from the field at a high frequency basis to a server where the images are analyzed and a water level measurement made. The system then stores both the measurement and the images corresponding to each measurement.
- The article reports the field performance and calculates the uncertainty of the system in the field

# Method

## Measurement principles

- The principle is that water forms a very crisp water line on a white or light grey colored vertical target installed in a water body. This is particularly visible in an image taken in the general horizontal direction.  Because of the light absorption of water (even if it is transparent), the pixels in the image have a dark shade, and usually much darker than a the vertical light colored (white or very light grey) background used as a target. The sharp contrast in the pixel grey scale at the water line is used for automatic detection of the water line.
- 



### Background 

## Field site details

- Constructed tidal marsh with diurnal tides of max 1.2m tidal amplitude
- Images obtained over a span of xx months
- Camera type, lense type
- Camera installed at xx m from the background with a x mm lense for a final resolution of yy mm per pixel
- Camera installed a zz m in altitude, and this much higher than the top and bottom of background. At the end, the was this downward angle for the top of the background and this angle for the bottom of the background.
- Insert figure here.
- Maybe we should have an objective measure of the fish eye effect here as well



### Image processing principles

### Statistical analysis

- 1000 images 'manually' read compared with automatic detection.
- Statistical models used
- Factors tested: angle, day/night, seasons

# Results

- 
- Day and night images
- Statistical results on the significance 
- percentage of the time that an image is found
- observed problems

# Discussion

- We will need to discuss the range (only 1.2 m) in this application

# Conclusion

# Acknowledgment

- Dr. Randall Etheridge for retrieving the SD card

# References



